<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Median Living Index - Real Purchasing Power Across America</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:wght@400;600;700&family=IBM+Plex+Sans:wght@400;500;600&family=IBM+Plex+Mono:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <meta name="description" content="See which states let you save vs. spend more than you earn. Interactive map showing purchasing power across America.">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <h1>Median Living Index</h1>
            <p class="subtitle">Measuring Real Purchasing Power Across the United States</p>
            <nav class="main-nav">
                <a href="index.html" class="nav-link active">Overview</a>
                <a href="rankings.html" class="nav-link">State Rankings</a>
            </nav>
        </div>
    </header>

    <!-- Quick Stats Banner -->
    <div class="stats-banner">
        <div class="container">
            <div class="stats-intro">
                <p class="stats-context">2023 National Average: <strong id="nationalMLI">--</strong></p>
            </div>
            <div class="stats-breakdown">
                <div class="stat-group surplus-group">
                    <span class="stat-figure" id="surplusStates">--</span>
                    <span class="stat-description">states with income surplus</span>
                </div>
                <div class="stat-group neutral-group">
                    <span class="stat-figure" id="breakEvenStates">--</span>
                    <span class="stat-description">states breaking even</span>
                </div>
                <div class="stat-group deficit-group">
                    <span class="stat-figure" id="deficitStates">--</span>
                    <span class="stat-description">states with income deficit</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container">
        <!-- Introduction -->
        <section class="intro">
            <h2>How It Works</h2>
            <div class="formula-display">
                <div class="formula-box">
                    <span class="formula-label">MLI =</span>
                    <span class="formula-fraction">
                        <span class="formula-numerator">Median Income</span>
                        <span class="formula-denominator">Cost of Living</span>
                    </span>
                </div>
                <p class="formula-explanation">Simple ratio measuring household purchasing power in each state</p>
            </div>
            
            <div class="interpretation-list">
                <div class="interpretation-item">
                    <span class="interp-value">1.0</span>
                    <div class="interp-content">
                        <strong>Break Even</strong>
                        <p>Income matches expenses. No surplus for savings or emergencies.</p>
                    </div>
                </div>
                <div class="interpretation-item">
                    <span class="interp-value">&gt;1.0</span>
                    <div class="interp-content">
                        <strong>Surplus</strong>
                        <p>Income exceeds living costs. Example: MLI of 1.35 = 35% surplus available for savings.</p>
                    </div>
                </div>
                <div class="interpretation-item">
                    <span class="interp-value">&lt;1.0</span>
                    <div class="interp-content">
                        <strong>Deficit</strong>
                        <p>Expenses exceed income. Households typically rely on debt or multiple income sources.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Map Section -->
        <section class="map-section">
            <h2>Interactive Map</h2>
            
            <div class="controls">
                <div class="control-group">
                    <label for="yearSlider">Year: <span id="yearDisplay">2023</span></label>
                    <input type="range" id="yearSlider" min="0" max="14" value="14" step="1">
                </div>
                <div class="control-group">
                    <label for="metricSelect">Show:</label>
                    <select id="metricSelect">
                        <option value="mli" selected>MLI Ratio</option>
                        <option value="surplus">Annual Surplus/Deficit</option>
                        <option value="income">Median Income</option>
                        <option value="col">Cost of Living</option>
                    </select>
                </div>
            </div>

            <div class="map-container">
                <svg id="map" width="960" height="600"></svg>
                <div id="tooltip" class="tooltip"></div>
            </div>

            <div class="legend">
                <div class="legend-title">MLI Scale</div>
                <div class="legend-gradient">
                    <span class="legend-label">0.8</span>
                    <div class="gradient-bar"></div>
                    <span class="legend-label">1.5</span>
                </div>
                <div class="legend-labels">
                    <span>Deficit (Debt)</span>
                    <span>Break Even</span>
                    <span>Surplus (Savings)</span>
                </div>
            </div>
        </section>

        <!-- State Comparison Tool -->
        <section class="comparison-section">
            <h2>Compare Two States</h2>
            <div class="comparison-controls">
                <select id="compareState1" class="state-select">
                    <option value="">Select state 1...</option>
                </select>
                <span class="vs-text">vs</span>
                <select id="compareState2" class="state-select">
                    <option value="">Select state 2...</option>
                </select>
                <button id="compareBtn" class="compare-btn">Compare</button>
            </div>
            <div id="comparisonResult" class="comparison-result" style="display: none;"></div>
        </section>

        <!-- State Detail Panel -->
        <section class="detail-panel" id="detailPanel" style="display: none;">
            <div class="detail-header">
                <h2 id="stateName">Select a state</h2>
                <button id="closeDetail" class="close-btn">&times;</button>
            </div>
            
            <div class="detail-content">
                <div class="stat-cards">
                    <div class="stat-card">
                        <div class="stat-label">MLI Ratio</div>
                        <div class="stat-value" id="mliScore">--</div>
                        <div class="stat-rank" id="mliRank">--</div>
                        <div class="stat-interpretation" id="mliInterpretation">--</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Median Income</div>
                        <div class="stat-value" id="medianIncome">--</div>
                        <div class="stat-subtitle">Annual household income</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Cost of Living</div>
                        <div class="stat-value" id="costOfLiving">--</div>
                        <div class="stat-subtitle">Annual expenses</div>
                    </div>
                    <div class="stat-card highlight-card">
                        <div class="stat-label">Annual Surplus/Deficit</div>
                        <div class="stat-value" id="annualSurplus">--</div>
                        <div class="stat-subtitle" id="surplusLabel">Available for savings</div>
                    </div>
                </div>

                <!-- Trend Chart -->
                <div class="chart-container">
                    <h3>MLI History (2008-2023)</h3>
                    <canvas id="trendChart"></canvas>
                    <div class="chart-insight" id="trendInsight"></div>
                </div>

                <!-- Cost Breakdown -->
                <div class="breakdown-container">
                    <h3>Where Your Money Goes (2023)</h3>
                    <div id="costBreakdown" class="cost-bars"></div>
                </div>
            </div>
        </section>

        <!-- Insights Section -->
        <section class="insights-section">
            <h2>Key Insights</h2>
            
            <div class="insights-columns">
                <div class="insight-column">
                    <h3 class="insight-header">Top & Bottom Performers</h3>
                    <div class="insight-subsection">
                        <h4>Best Purchasing Power</h4>
                        <div id="bestStates" class="insight-list"></div>
                    </div>
                    <div class="insight-subsection">
                        <h4>Biggest Deficits</h4>
                        <div id="worstStates" class="insight-list"></div>
                    </div>
                </div>
                
                <div class="insight-column">
                    <h3 class="insight-header">5-Year Trends</h3>
                    <div class="insight-subsection">
                        <h4>Biggest Improvements</h4>
                        <div id="improvedStates" class="insight-list"></div>
                    </div>
                    <div class="insight-subsection">
                        <h4>Biggest Declines</h4>
                        <div id="declinedStates" class="insight-list"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Methodology -->
        <section class="methodology">
            <h2>Methodology</h2>
            
            <div class="method-prose">
                <h3>Data Sources</h3>
                <p>Income data from US Census Bureau American Community Survey (ACS). Cost of living calculated using Bureau of Economic Analysis Regional Price Parities adjusted for state-specific prices. Spending patterns based on Bureau of Labor Statistics Consumer Expenditure Survey across 14 expense categories.</p>
                
                <h3>Calculation</h3>
                <p>MLI divides median household income by estimated annual cost of living. An MLI of 1.0 indicates income equals expenses. Values above 1.0 show surplus (percentage by which income exceeds costs). Values below 1.0 indicate deficit where households cannot cover typical expenses without debt or additional income.</p>
                
                <h3>Interpretation</h3>
                <p>The index measures whether the median household can afford typical expenses in their state. Results represent the middle household—50% spend more, 50% spend less. Low MLI states often correlate with higher household debt and lower savings rates.</p>
            </div>
        </section>

            <div class="faq">
                <h3>Common Questions</h3>
                
                <details>
                    <summary>Why is this different from other cost of living indices?</summary>
                    <p>Traditional cost of living indices only show how expensive places are, not whether people can afford them. The MLI combines income data with cost data to show actual purchasing power. A state can be expensive but still have high MLI if incomes are even higher (like Massachusetts), or cheap but have low MLI if incomes are even lower (like Mississippi).</p>
                </details>
                
                <details>
                    <summary>What does an MLI score actually mean?</summary>
                    <p><strong>MLI = 1.0:</strong> Income exactly covers expenses (paycheck to paycheck). No room for savings, emergencies, or unexpected costs.<br>
                    <strong>MLI > 1.0:</strong> Surplus available. For example, MLI of 1.20 means 20% of income is available for savings, investment, or discretionary spending.<br>
                    <strong>MLI < 1.0:</strong> Deficit. The median household is spending more than they earn, likely through debt, savings drawdown, or multiple jobs.</p>
                </details>
                
                <details>
                    <summary>Can high-income states have low MLI?</summary>
                    <p>Yes, but it's rare. High-income states usually have high MLI because earnings outpace costs. For example, Massachusetts has a median income of ~$100k and costs of ~$79k, giving an MLI of 1.26. However, historically some high-income states like Hawaii have struggled with MLI near 1.0 because housing costs are extreme relative to even high incomes.</p>
                </details>
                
                <details>
                    <summary>Why do some states have MLI below 1.0?</summary>
                    <p>States like Mississippi (MLI ~0.93) have median incomes around $54k but estimated costs of $58k. This doesn't mean every household is in debt—it means the median household faces financial stress. Many cope through: multiple income earners, reducing spending below the baseline estimate, debt accumulation, or government assistance programs.</p>
                </details>
                
                <details>
                    <summary>How accurate are the cost estimates?</summary>
                    <p>The methodology uses official BLS Consumer Expenditure Survey data for middle-income households, adjusted by BEA Regional Price Parities to reflect state-specific costs. However, actual costs vary by: household size, lifestyle choices, urban vs. rural location, homeownership vs. renting, and personal circumstances. The MLI represents a median household—50% spend less, 50% spend more.</p>
                </details>
                
                <details>
                    <summary>Does this account for taxes?</summary>
                    <p>The income data is pre-tax (gross income), and the cost estimates include some tax-like expenses (FICA, property taxes via housing costs), but not comprehensive state income taxes. States with no income tax (like Texas or Florida) may have a practical advantage not fully reflected in the MLI. This is a known limitation of the current methodology.</p>
                </details>
                
                <details>
                    <summary>Why don't cheaper states always have higher MLI?</summary>
                    <p>Because income matters too! West Virginia has low costs ($59k) but also low income ($56k), giving MLI of 0.95. Utah has moderate costs ($69k) but high income ($93k), giving MLI of 1.35. The ratio is what matters, not absolute values. This is why some expensive states (like Massachusetts or Maryland) have excellent MLI—incomes are even higher than costs.</p>
                </details>
                
                <details>
                    <summary>How has MLI changed over time?</summary>
                    <p>National average MLI has improved from 1.08 in 2008 to 1.14 in 2023. However, this masks regional variation: some states (like Utah) have seen dramatic improvements, while others have declined. The 2008-2012 period showed significant financial stress across many states due to the Great Recession.</p>
                </details>
                
                <details>
                    <summary>What are the limitations of this index?</summary>
                    <p><strong>What's missing:</strong><br>
                    • Comprehensive state/local tax differences<br>
                    • Quality of life factors (weather, amenities, culture)<br>
                    • Wealth and assets (only measures income)<br>
                    • Healthcare quality and access<br>
                    • Education quality<br>
                    • Within-state variation (urban vs. rural)<br>
                    • Non-monetary benefits (family support, community)<br>
                    <br>
                    <strong>Why it still matters:</strong> The MLI focuses specifically on economic purchasing power—can the median household afford their basic expenses? It's one important lens, not the complete picture of quality of life.</p>
                </details>
                
                <details>
                    <summary>Should I move based on MLI alone?</summary>
                    <p>No! MLI is one factor among many. Consider: job opportunities in your field, family/social connections, climate preferences, political/cultural fit, quality of schools, healthcare access, commute times, and lifestyle preferences. A high MLI state isn't necessarily better for you if there are no jobs in your industry or you'd be miserable in the climate. Use MLI as one data point in a holistic decision.</p>
                </details>
                
                <details>
                    <summary>Why do Florida and California have similar MLI despite different reputations?</summary>
                    <p>Both have MLI around 0.97-1.10 despite different cost structures. Florida has no state income tax but high housing costs (especially post-2020). California has high taxes and high housing costs, but also significantly higher median incomes (~$95k vs ~$73k). The ratios end up similar despite different absolute numbers. This shows why looking at just "cost of living" or just "taxes" is misleading.</p>
                </details>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Median Living Index | Data: Census Bureau, BEA, BLS</p>
            <p>Created by Cam Noval | <a href="https://github.com/camnoval/mli" target="_blank">View on GitHub</a></p>
        </div>
    </footer>

    <!-- Load D3.js for map -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    
    <!-- Load Chart.js for trend charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <!-- Main application script -->
    <script src="app.js"></script>
</body>
</html>