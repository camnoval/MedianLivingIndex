<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Median Living Index - Real Purchasing Power Across America</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:wght@400;600;700&family=IBM+Plex+Sans:wght@400;500;600&family=IBM+Plex+Mono:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7804559500348841"
     crossorigin="anonymous"></script>
    <meta name="description" content="See which states let you save vs. spend more than you earn. Interactive map showing purchasing power across America.">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <!-- Navigation -->
    <nav class="page-nav">
        <div class="container">
            <div class="nav-tabs">
                <a href="index.html" class="nav-tab active">
                    <span class="nav-text">MLI Map</span>
                </a>
                <a href="market-divergence.html" class="nav-tab">
                    <span class="nav-text">Market Analysis</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <header>
        <div class="container">
            <h1>Median Living Index</h1>
            <p class="subtitle">Measuring Real Purchasing Power Across the United States</p>
        </div>
    </header>

    <!-- Quick Stats Banner -->
    <div class="stats-banner">
        <div class="container">
            <div class="stats-intro">
                <p class="stats-context">2023 National Average: <strong id="nationalMLI">--</strong></p>
            </div>
            <div class="stats-breakdown">
                <div class="stat-group surplus-group">
                    <span class="stat-figure" id="surplusStates">--</span>
                    <span class="stat-description">states with income surplus</span>
                </div>
                <div class="stat-group neutral-group">
                    <span class="stat-figure" id="breakEvenStates">--</span>
                    <span class="stat-description">states breaking even</span>
                </div>
                <div class="stat-group deficit-group">
                    <span class="stat-figure" id="deficitStates">--</span>
                    <span class="stat-description">states with income deficit</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container">
        <!-- Interactive Map Section -->
        <section class="map-section">
            <h2>Interactive Map</h2>
            
            <div class="controls">
                <div class="control-group">
                    <label for="yearSlider">Year: <span id="yearDisplay">2023</span></label>
                    <input type="range" id="yearSlider" min="0" max="14" value="14" step="1">
                </div>
                <div class="control-group">
                    <label for="metricSelect">Show:</label>
                    <select id="metricSelect">
                        <option value="mli" selected>MLI Ratio</option>
                        <option value="surplus">Annual Surplus/Deficit</option>
                        <option value="income">Median Income</option>
                        <option value="col">Cost of Living</option>
                    </select>
                </div>
            </div>

            <div class="map-container">
                <svg id="map" width="960" height="600"></svg>
                <div id="tooltip" class="tooltip"></div>
            </div>

            <div class="legend">
                <div class="legend-title">MLI Scale</div>
                <div class="legend-gradient">
                    <span class="legend-label">0.8</span>
                    <div class="gradient-bar"></div>
                    <span class="legend-label">1.5</span>
                </div>
                <div class="legend-labels">
                    <span>Deficit (Debt)</span>
                    <span>Break Even</span>
                    <span>Surplus (Savings)</span>
                </div>
            </div>
        </section>

        <!-- Introduction -->
        <section class="intro">
            <h2>How It Works</h2>
            <div class="formula-display">
                <div class="formula-box">
                    <span class="formula-label">MLI =</span>
                    <span class="formula-fraction">
                        <span class="formula-numerator">Median Income</span>
                        <span class="formula-denominator">Cost of Living</span>
                    </span>
                </div>
                <p class="formula-explanation">Ratio measuring household purchasing power in each state</p>
            </div>
            
            <div class="interpretation-list">
                <div class="interpretation-item">
                    <span class="interp-value">1.0</span>
                    <div class="interp-content">
                        <strong>Break Even</strong>
                        <p>Income matches expenses. No room for savings.</p>
                    </div>
                </div>
                <div class="interpretation-item">
                    <span class="interp-value">&gt;1.0</span>
                    <div class="interp-content">
                        <strong>Surplus</strong>
                        <p>Income exceeds costs. MLI of 1.35 = 35% surplus.</p>
                    </div>
                </div>
                <div class="interpretation-item">
                    <span class="interp-value">&lt;1.0</span>
                    <div class="interp-content">
                        <strong>Deficit</strong>
                        <p>Expenses exceed income. Households rely on debt or multiple incomes.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- State Comparison Tool -->
        <section class="comparison-section">
            <h2>Compare Two States</h2>
            <div class="comparison-controls">
                <select id="compareState1" class="state-select">
                    <option value="">Select state 1...</option>
                </select>
                <span class="vs-text">vs</span>
                <select id="compareState2" class="state-select">
                    <option value="">Select state 2...</option>
                </select>
                <button id="compareBtn" class="compare-btn">Compare</button>
            </div>
            <div id="comparisonResult" class="comparison-result" style="display: none;"></div>
        </section>

        <!-- State Detail Panel -->
        <section class="detail-panel" id="detailPanel" style="display: none;">
            <div class="detail-header">
                <h2 id="stateName">Select a state</h2>
                <button id="closeDetail" class="close-btn">&times;</button>
            </div>
            
            <div class="detail-content">
                <div class="stat-cards">
                    <div class="stat-card">
                        <div class="stat-label">MLI Ratio</div>
                        <div class="stat-value" id="mliScore">--</div>
                        <div class="stat-rank" id="mliRank">--</div>
                        <div class="stat-interpretation" id="mliInterpretation">--</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Median Income</div>
                        <div class="stat-value" id="medianIncome">--</div>
                        <div class="stat-subtitle">Annual household income</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Cost of Living</div>
                        <div class="stat-value" id="costOfLiving">--</div>
                        <div class="stat-subtitle">Annual expenses</div>
                    </div>
                    <div class="stat-card highlight-card">
                        <div class="stat-label">Annual Surplus/Deficit</div>
                        <div class="stat-value" id="annualSurplus">--</div>
                        <div class="stat-subtitle" id="surplusLabel">Available for savings</div>
                    </div>
                </div>

                <!-- Trend Chart -->
                <div class="chart-container">
                    <h3>MLI History (2008-2023)</h3>
                    <canvas id="trendChart"></canvas>
                    <div class="chart-insight" id="trendInsight"></div>
                </div>

                <!-- Cost Breakdown -->
                <div class="breakdown-container">
                    <h3>Where Your Money Goes (2023)</h3>
                    <div id="costBreakdown" class="cost-bars"></div>
                </div>
            </div>
        </section>

        <!-- Insights Section -->
        <section class="insights-section">
            <h2>Key Insights</h2>
            
            <div class="insights-columns">
                <div class="insight-column">
                    <h3 class="insight-header">Top & Bottom Performers</h3>
                    <div class="insight-subsection">
                        <h4>Best Purchasing Power</h4>
                        <div id="bestStates" class="insight-list"></div>
                    </div>
                    <div class="insight-subsection">
                        <h4>Biggest Deficits</h4>
                        <div id="worstStates" class="insight-list"></div>
                    </div>
                </div>
                
                <div class="insight-column">
                    <h3 class="insight-header">5-Year Trends</h3>
                    <div class="insight-subsection">
                        <h4>Biggest Improvements</h4>
                        <div id="improvedStates" class="insight-list"></div>
                    </div>
                    <div class="insight-subsection">
                        <h4>Biggest Declines</h4>
                        <div id="declinedStates" class="insight-list"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rankings Table -->
        <section class="rankings-section">
            <h2>State Rankings</h2>
            
            <div class="tab-controls">
                <button class="tab-btn active" data-tab="all">All States</button>
                <button class="tab-btn" data-tab="top10">Top 10 (Best)</button>
                <button class="tab-btn" data-tab="bottom10">Bottom 10 (Worst)</button>
            </div>

            <div class="table-controls">
                <input type="text" id="searchBox" placeholder="Search states..." class="search-box">
                <select id="sortSelect" class="sort-select">
                    <option value="mli-desc" selected>Highest MLI</option>
                    <option value="mli-asc">Lowest MLI</option>
                    <option value="name">Alphabetical</option>
                    <option value="surplus-desc">Highest Surplus</option>
                    <option value="income-desc">Highest Income</option>
                    <option value="col-asc">Lowest Cost</option>
                </select>
            </div>

            <div class="table-container">
                <table id="rankingsTable">
                    <thead>
                        <tr>
                            <th data-sort="rank" class="sortable">Rank<span class="sort-arrow"></span></th>
                            <th data-sort="name" class="sortable">State<span class="sort-arrow"></span></th>
                            <th data-sort="mli" class="sortable sort-desc">MLI<span class="sort-arrow"></span></th>
                            <th data-sort="surplus" class="sortable">Surplus/Deficit<span class="sort-arrow"></span></th>
                            <th data-sort="income" class="sortable">Median Income<span class="sort-arrow"></span></th>
                            <th data-sort="col" class="sortable">Cost of Living<span class="sort-arrow"></span></th>
                            <th data-sort="change5yr" class="sortable">5yr Change<span class="sort-arrow"></span></th>
                            <th data-sort="change" class="sortable">15yr Change<span class="sort-arrow"></span></th>
                        </tr>
                    </thead>
                    <tbody id="rankingsBody">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Household Economic Position Timeline -->
        <section class="savings-section">
            <h2>Household Economic Position Over Time</h2>
            <p class="section-intro">
                States are classified by the relationship between median income and typical costs: surplus capacity (MLI > 1.05), break-even status (0.95-1.05), or deficit position (MLI < 0.95).
            </p>

            <div class="chart-container">
                <canvas id="savingsTimeline"></canvas>
            </div>

            <div class="savings-distribution">
                <h3>Current Distribution (2023)</h3>
                <div class="dist-bars">
                    <div class="dist-row">
                        <span class="dist-label">Can Save (>5% surplus)</span>
                        <div class="dist-bar surplus">
                            <span class="dist-value" id="states_surplus">--</span>
                        </div>
                    </div>
                    <div class="dist-row">
                        <span class="dist-label">Breaking Even (±5%)</span>
                        <div class="dist-bar neutral">
                            <span class="dist-value" id="states_neutral">--</span>
                        </div>
                    </div>
                    <div class="dist-row">
                        <span class="dist-label">In Deficit</span>
                        <div class="dist-bar deficit">
                            <span class="dist-value" id="states_deficit">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Methodology -->
        <section class="methodology">
            <h2>Methodology</h2>
            
            <div class="method-prose">
                <h3>Data Sources</h3>
                <p>Income data from US Census Bureau American Community Survey (ACS). Cost of living calculated using Bureau of Economic Analysis Regional Price Parities adjusted for state-specific prices. Spending patterns based on Bureau of Labor Statistics Consumer Expenditure Survey across 14 expense categories.</p>
                
                <h3>Calculation</h3>
                <p>MLI divides median household income by estimated annual cost of living. An MLI of 1.0 indicates income equals expenses. Values above 1.0 show surplus (percentage by which income exceeds costs). Values below 1.0 indicate deficit where households cannot cover typical expenses without debt or additional income.</p>
                
                <h3>Interpretation</h3>
                <p>The index measures whether the median household can afford typical expenses in their state. Results represent the middle household—50% spend more, 50% spend less. Low MLI states often correlate with higher household debt and lower savings rates.</p>
            </div>
        </section>

            <div class="faq">
                <h3>Common Questions</h3>
                
                <details>
                    <summary>How is this different from typical cost of living rankings?</summary>
                    <p>Most cost of living indices just tell you how expensive a place is. MLI goes further by asking: can people actually afford to live there? Massachusetts is expensive, but incomes are high enough to give it one of the best MLI scores. Mississippi is cheap, but incomes are low enough that the median household struggles. The ratio is what matters.</p>
                </details>
                
                <details>
                    <summary>What do the numbers mean?</summary>
                    <p><strong>MLI = 1.0:</strong> Breaking even. Income covers expenses with nothing left over.<br>
                    <strong>MLI > 1.0:</strong> Breathing room. An MLI of 1.20 means 20% of income goes to savings or discretionary spending.<br>
                    <strong>MLI < 1.0:</strong> Spending more than earned, probably through debt, multiple jobs, or drawing down savings.</p>
                </details>
                
                <details>
                    <summary>Can wealthy states have bad MLI scores?</summary>
                    <p>Uncommon but it happens. Massachusetts has median income around $100k and costs around $79k, so MLI sits at 1.26. But California has shown that high income does not guarantee high MLI. When housing costs spike faster than wages, even six-figure incomes can leave households stretched thin.</p>
                </details>
                
                <details>
                    <summary>What is going on when MLI is below 1.0?</summary>
                    <p>Take Mississippi: median income is about $54k while estimated living costs are $58k. That does not mean everyone is drowning in debt. Some households have multiple earners, some spend less than the baseline estimate, and others do rely on credit cards or assistance. The MLI just shows that the math is tight for the typical household.</p>
                </details>
                
                <details>
                    <summary>How reliable are these cost estimates?</summary>
                    <p>The methodology uses BLS Consumer Expenditure Survey data adjusted for state prices via BEA Regional Price Parities. Solid government data, but personal costs depend on family size, whether renting or owning, urban vs rural living, and lifestyle (especially true for categories like entertainment, tobacco, reading, and alcohol). The MLI reflects what a middle-of-the-road household faces (half spend more, half spend less).</p>
                </details>
                
                <details>
                    <summary>Are taxes included?</summary>
                    <p>Sort of. Income figures are pre-tax, and the costs include things like FICA and property taxes (baked into housing). However, the methodology does not account for full state income tax differences, which gives places like Texas and Florida a real-world edge that the index understates. A limitation worth noting.</p>
                </details>
                
                <details>
                    <summary>Why does not cheap automatically mean good MLI?</summary>
                    <p>West Virginia has low costs ($59k) but low income too ($56k), putting MLI at 0.95. Utah costs more ($69k) but income is much higher ($93k), giving it an MLI of 1.35. When expensive states like Massachusetts have a high cost of living, they have even higher median incomes, so they end up with great MLI scores.</p>
                </details>
                
                <details>
                    <summary>Has this gotten better or worse over time?</summary>
                    <p>The national average improved from 1.08 in 2008 to 1.14 in 2023,, which means the economy is getting slightly better for the median individual. But that average hides big regional swings. Utah MLI shot up while other states lost ground. The Great Recession years (2008-2012) were particularly rough across most states. The census numbers also are known to underestimate slightly the housing inflation for renters specifically (~35% of the national average), so that limitation also may skew the data.</p>
                </details>
                
                <details>
                    <summary>What does not this measure?</summary>
                    <p><strong>Missing pieces:</strong><br>
                    • Full tax burden differences between states<br>
                    • Quality of life (weather, culture, amenities)<br>
                    • Wealth and home equity (just income)<br>
                    • Healthcare and education quality<br>
                    • City vs. rural differences within states (big MLI variation in itself) <br>
                    • Family support and community networks<br>
                    <br>
                    <strong>Why it is still useful:</strong> MLI answers one specific question well: can median earners afford basic expenses? Important, even if not the whole picture.</p>
                </details>
                
                
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Median Living Index | Data: Census Bureau, BEA, BLS</p>
            <p>Created by Cam Noval | <a href="https://github.com/camnoval/medianlivingindex" target="_blank">View on GitHub</a></p>
        </div>
    </footer>

    <!-- Load D3.js for map -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    
    <!-- Load Chart.js for trend charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <!-- Main application script -->
    <script src="app.js"></script>
</body>
</html>